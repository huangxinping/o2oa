MWF.xApplication.Report=MWF.xApplication.Report||{},MWF.xApplication.ReportDocument=MWF.xApplication.ReportDocument||{},MWF.require("MWF.widget.O2Identity",null,!1),MWF.xDesktop.requireApp("Report","lp."+MWF.language,null,!1),MWF.xDesktop.requireApp("Template","Explorer",null,!1),MWF.xDesktop.requireApp("Report","Common",null,!1),MWF.xDesktop.requireApp("Report","Setting",null,!1),MWF.xDesktop.requireApp("Report","StrategyExplorer",null,!1),MWF.xApplication.ReportDocument.options={multitask:!0,executable:!0},MWF.xApplication.ReportDocument.Main=new Class({Extends:MWF.xApplication.Common.Main,Implements:[Options,Events],options:{style:"default",name:"ReportDocument",icon:"icon.png",width:"1324",height:"720",isResize:!0,isMax:!0,isNew:!1,isEdited:!0,title:MWF.xApplication.ReportDocument.LP.title,id:""},onQueryLoad:function(){this.lp=MWF.xApplication.Report.LP},onQueryClose:function(){},loadApplication:function(t){this.userData=layout.desktop.session.user,this.userName=this.userData.distinguishedName,this.restActions=this.actions=MWF.Actions.get("x_report_assemble_control"),this.common=new MWF.xApplication.Report.Common(this),this.path="../x_component_ReportDocument/$Main/"+this.options.style+"/",this.status&&this.setOptions(this.status),this.createNode(),this.loadApplicationLayout()},createNode:function(){this.content.setStyle("overflow","hidden")},clearContent:function(){this.content.empty()},reload:function(t,e){this.content.empty(),this.loadApplicationLayout()},loadApplicationLayout:function(){this.report=new MWF.xApplication.Report.StrategyExplorer(this.content,this,this.restActions,{id:this.options.id}),this.report.load()},recordStatus:function(){return{id:this.options.id,isEdited:this.options.isEdited,isNew:this.options.isNew}},createNewDocument:function(){var t="ReportDocument"+this.sectionData.id;this.desktop.apps[t]?this.desktop.apps[t].setCurrent():this.desktop.openApplication(null,"ReportDocument",{sectionId:this.sectionData.id,appId:t,isNew:!0,isEdited:!0,onPostPublish:function(){}.bind(this)})},edit:function(){var t="ReportDocument"+this.data.id;this.options.isEdited=!0,this.reload(t,t)},delete:function(t){var e=this;this.confirm("warn",t,this.lp.deleteDocumentTitle,this.lp.deleteDocument,350,120,(function(){e.restActions.deleteSubject(e.data.id,function(){e.notice(e.lp.deleteDocumentOK,"ok"),e.reloadAllParents(),e.close()}.bind(this)),this.close()}),(function(){this.close()}))}});