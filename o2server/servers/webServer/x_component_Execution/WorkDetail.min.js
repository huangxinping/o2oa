MWF.xApplication.Execution=MWF.xApplication.Execution||{},MWF.xDesktop.requireApp("Execution","WorkForm",null,!1),MWF.xDesktop.requireApp("Execution","Chat",null,!1),MWF.xDesktop.requireApp("Execution","ReportAttachment",null,!1),MWF.xApplication.Execution.WorkDetail=new Class({Extends:MWF.xApplication.Execution.WorkForm,Implements:[Options,Events],options:{style:"default",width:"100%",height:"100%",hasTop:!0,hasIcon:!1,hasBottom:!1,title:"",draggable:!1,closeAction:!0,isNew:!1,isEdited:!0,hasScroll:!1},initialize:function(t,e,s,i){this.setOptions(i),this.explorer=t,this.app=t.app||t,this.lp=this.app.lp,this.actions=this.app.restActions,this.path="../x_component_Execution/$WorkDetail/",this.cssPath=this.path+this.options.style+"/css.wcss",this._loadCss(),this.options.title=this.lp.title,this.data=s||{},this.workDetailLp=this.app.lp.WorkDetail,this.actions.getBaseWorkInfo(this.data.id,function(t){t.data&&(this.baseWorkData=t.data)}.bind(this),function(t,e,s){this.showErrorMessage(t,e,s)}.bind(this),!1)},reload:function(){this._createTableContent(),this.setFormNodeSize()},createTopNode:function(){this.formTopNode||(this.formTopNode=new Element("div.formTopNode",{styles:this.css.formTopNode}).inject(this.formNode),this.formTopIconNode=new Element("div",{styles:this.css.formTopIconNode}).inject(this.formTopNode),this.formTopTextNode=new Element("div.formTopTextNode",{styles:this.css.formTopTextNode,text:this.data.title||""}).inject(this.formTopNode),this.options.closeAction&&(this.formTopCloseActionNode=new Element("div",{styles:this.css.formTopCloseActionNode}).inject(this.formTopNode),this.formTopCloseActionNode.addEvent("click",function(){this.close()}.bind(this))),this._createTopContent())},_createTopContent:function(){},_createTableContent:function(){this.table&&this.table.destroy(),this.table=new Element("table.table",{height:"100%",border:"0",cellpadding:"0",cellspacing:"0",class:"formTable"}).inject(this.formTableArea),this.tr=new Element("tr",{valign:"top"}).inject(this.table),this.leftArea=new Element("td.leftArea",{styles:this.css.leftArea}).inject(this.tr),this.detailArea=new Element("td.detailArea",{styles:this.css.detailArea}).inject(this.tr),this.chatArea=new Element("td.chatArea",{styles:this.css.chatArea}).inject(this.tr),this.loadLeftContent(),this.loadForm(),this.loadChatNode(),this.setContentSize(),this.setContentSizeFun=this.setContentSize.bind(this),this.app.addEvent("resize",this.setContentSizeFun)},loadLeftContent:function(){this.reportArea=new Element("div.reportArea",{styles:this.css.reportArea}).inject(this.leftArea),this.loadReportTop(),this.loadReportContent(),this.questionArea=new Element("div.questionArea",{styles:this.css.questionArea}).inject(this.leftArea),this.loadQuestionTop(),this.loadQuestionContent()},loadReportTop:function(){this.reportTopNode=new Element("div.reportTopNode",{styles:this.css.reportTopNode}).inject(this.reportArea),this.reportTopIconNode=new Element("div.reportTopIconNode",{styles:this.css.reportTopIconNode}).inject(this.reportTopNode),this.reportTopTextNode=new Element("div.reportTopTextNode",{styles:this.css.reportTopTextNode,text:this.lp.workReportTitle}).inject(this.reportTopNode),this.actions.getBaseWorkActions(this.baseWorkData.id,function(t){"success"==t.type&&t.data&&t.data.operation&&t.data.operation.indexOf("REPORT")>-1&&(this.startReportDiv=new Element("div.startReport",{styles:this.css.startReport,text:this.lp.WorkDetail.startReport}).inject(this.reportTopNode),this.startReportDiv.addEvents({click:function(){MWF.xDesktop.requireApp("Execution","WorkReport",function(){var t={workId:this.baseWorkData.id};new MWF.xApplication.Execution.WorkReport(this,this.actions,t,{isNew:!1,isEdited:!1,tabLocation:"workDetail",from:"drafter",onPostClose:function(){this.reload()}.bind(this)}).load()}.bind(this))}.bind(this)}))}.bind(this))},loadReportContent:function(){_self=this,this.reportContentNode=new Element("div.reportContentNode",{styles:this.css.reportContentNode}).inject(this.reportArea),this.getReportData(function(t){t.data&&t.data.each(function(t){var e="";if(t.activityName==this.lp.WorkReport.activityName.drafter?e="#ff0000":t.processLogs&&t.processLogs.each(function(t){t.activityName==this.lp.WorkReport.activityName.leader&&(e="#00FF00")}.bind(this)),""==t.progressDescription&&""==t.workPlan&&(e="#ff0000"),t.createTime)var s=t.createTime.split(" ")[0].split("-"),i=s[0]+this.lp.year+s[1]+this.lp.month+s[2]+this.lp.day;else i="";var o=new Element("div",{styles:this.css.reportItemNode}).inject(this.reportContentNode);new Element("div",{styles:this.css.reportItemIconNode}).inject(o);new Element("div",{styles:this.css.reportItemTextNode,html:"<font color='"+e+"'>"+i+"-"+t.shortTitle+"</font>"}).inject(o);o.addEvents({mouseover:function(){_self.curReportItemNode!=this.node&&this.node.setStyles(_self.css.reportItemNode_over)}.bind({node:o}),mouseout:function(){_self.curReportItemNode!=this.node&&this.node.setStyles(_self.css.reportItemNode)}.bind({node:o}),click:function(){this.node!=_self.curReportItemNode&&(this.node.setStyles(_self.css.reportItemNode_over),_self.curReportItemNode&&_self.curReportItemNode.setStyles(_self.css.reportItemNode),_self.curReportItemNode=this.node,_self.createPrevReportInfor(this.data.id))}.bind({data:t,node:o})})}.bind(this))}.bind(this)),this.app.setScrollBar(this.reportContentNode)},getReportData:function(t){this.actions.getWorkReportList(this.data.id,(function(e){t&&t(e)}))},createPrevReportInfor:function(t){var e=this.app.lp.WorkReport;this.prevReportInforDiv&&this.prevReportInforDiv.destroy(),this.prevReportInforDiv=new Element("div.prevReportInforDiv",{styles:this.css.prevReportInforDiv}).inject(this.formTableContainer),this.prevReportInforTopDiv=new Element("div.prevReportInforTopDiv",{styles:this.css.prevReportInforTopDiv}).inject(this.prevReportInforDiv),this.prevReportInforTopCloseDiv=new Element("div.prevReportInforTopCloseDiv",{styles:this.css.prevReportInforTopCloseDiv}).inject(this.prevReportInforTopDiv).addEvents({click:function(){this.prevReportInforDiv.destroy(),this.curReportItemNode&&this.curReportItemNode.setStyles(this.css.reportItemNode),this.curReportItemNode=null}.bind(this)}),this.prevReportInforListDiv=new Element("div.prevReportInforListDiv",{styles:this.css.prevReportInforListDiv}).inject(this.prevReportInforDiv),this.prevReportInforListDiv.setStyles({height:this.reportContentInforHeight+"px"}),this.app.createShade(this.prevReportInforDiv),this.actions.getWorkReport(t,function(s){if(this.app.destroyShade(),"success"==s.type){var i=new Element("div.prevContentDiv",{styles:this.css.prevContentDiv}).inject(this.prevReportInforListDiv),o=new Element("div.prevContentTitleDiv",{styles:this.css.prevContentTitleDiv,text:e.contentTitle1+":"}).inject(i),n=new Element("div.prevContentValueDiv",{styles:this.css.prevContentValueDiv,text:s.data.progressDescription}).inject(i);i=new Element("div.prevContentDiv",{styles:this.css.prevContentDiv}).inject(this.prevReportInforListDiv),o=new Element("div.prevContentTitleDiv",{styles:this.css.prevContentTitleDiv,text:e.contentTitle2+":"}).inject(i),n=new Element("div.prevContentValueDiv",{styles:this.css.prevContentValueDiv,text:s.data.workPlan}).inject(i),i=new Element("div.prevContentDiv",{styles:this.css.prevContentDiv}).inject(this.prevReportInforListDiv),o=new Element("div.prevContentTitleDiv",{styles:this.css.prevContentTitleDiv,text:this.workDetailLp.isCompleted+":"}).inject(i);var r=s.data.isWorkCompleted?" 是 ":" 否 ";r=(r=this.workDetailLp.isCompleted+":"+r)+" "+this.workDetailLp.completePercent+" "+parseInt(s.data.progressPercent)+"%",o.set("text",r),s.data.needAdminAudit&&(i=new Element("div.prevContentDiv",{styles:this.css.prevContentDiv}).inject(this.prevReportInforListDiv),o=new Element("div.prevContentTitleDiv",{styles:this.css.prevContentTitleDiv,text:e.adminContentTitle+":"}).inject(i),n=new Element("div.prevContentValueDiv",{styles:this.css.prevContentValueDiv,text:s.data.adminSuperviseInfo?s.data.adminSuperviseInfo:""}).inject(i)),i=new Element("div.prevContentDiv",{styles:this.css.prevContentDiv}).inject(this.prevReportInforListDiv),o=new Element("div.prevContentTitleDiv",{styles:this.css.prevContentTitleDiv,text:e.leaderContentTitle+":"}).inject(i),n=new Element("div.prevContentValueDiv",{styles:this.css.prevContentValueDiv}).inject(i);var a=new Element("div.reportLeaderOpinionsDiv",{styles:this.css.reportLeaderOpinionsDiv}).inject(n),p=s.data.processLogs;this.preLeaderTitle=[],this.preLeaderValue=[],p&&p.each(function(t){t.activityName==this.lp.WorkReport.activityName.leader&&t.processStatus==this.lp.WorkReport.status.drafter&&t.processorIdentity==this.app.identity?this.leaderOpinionDrafter=t.opinion:t.activityName==this.lp.WorkReport.activityName.leader&&t.processStatus==this.lp.WorkReport.status.effect&&(this.preLeaderTitle.push(t.processorIdentity.split("@")[0]+"("+t.processTimeStr+")"),this.preLeaderValue.push(t.opinion))}.bind(this));for(var l=0;l<this.preLeaderTitle.length;l++){var h=new Element("div.reportLeaderContentDiv",{styles:this.css.reportLeaderContentDiv}).inject(a);h.setStyle("border-bottom","1px dashed #3c76c1");new Element("div.reportLeaderTitleDiv",{styles:this.css.reportLeaderTitleDiv,text:this.preLeaderTitle[l]+":"}).inject(h),new Element("div.reportLeaderValueDiv",{styles:this.css.reportLeaderValueDiv,text:this.preLeaderValue[l]}).inject(h)}i=new Element("div.prevContentDiv",{styles:this.css.prevContentDiv}).inject(this.prevReportInforListDiv),o=new Element("div.prevContentTitleDiv",{styles:this.css.prevContentTitleDiv,text:this.workDetailLp.attachment+":"}).inject(i),n=new Element("div.prevContentValueDiv",{styles:this.css.prevContentValueDiv}).inject(i),this.loadReportAttachment(n,t)}}.bind(this),null,!0),this.app.setScrollBar(this.prevReportInforListDiv)},loadReportAttachment:function(t,e){this.attachment=new MWF.xApplication.Execution.ReportAttachment(t,this.app,this.actions,this.app.lp,{documentId:e,isNew:this.options.isNew,isEdited:!1,size:"min"}),this.attachment.load()},loadQuestionTop:function(){this.questionTopNode=new Element("div.questionTopNode",{styles:this.css.questionTopNode}).inject(this.questionArea),this.questionTopIconNode=new Element("div",{styles:this.css.questionTopIconNode}).inject(this.questionTopNode),this.questionTopTextNode=new Element("div",{styles:this.css.questionTopTextNode,text:this.lp.workQuestionTitle}).inject(this.questionTopNode)},loadQuestionContent:function(){this.questionContentNode=new Element("div",{styles:this.css.questionContentNode}).inject(this.questionArea),this.app.setScrollBar(this.questionContentNode),this.getQuestionData(function(t){t.data.each(function(t){var e=new Element("div",{styles:this.css.questionItemNode}).inject(this.questionContentNode);new Element("div",{styles:this.css.questionItemIconNode}).inject(e);new Element("div",{styles:this.css.questionItemTextNode,text:t.subject}).inject(e)}.bind(this))}.bind(this))},getQuestionData:function(t){t&&t({data:[]})},loadChatNode:function(){this.chatTopNode=new Element("div.chatTopNode",{styles:this.css.chatTopNode}).inject(this.chatArea),this.chatTopIconNode=new Element("div",{styles:this.css.chatTopIconNode}).inject(this.chatTopNode),this.chatTopTextNode=new Element("div",{styles:this.css.chatTopTextNode,text:this.lp.workChatTitle}).inject(this.chatTopNode),this.loadChatContent()},loadChatContent:function(){this.chatContentNode=new Element("div",{styles:this.css.chatContentNode}).inject(this.chatArea),this.chatContentListNode=new Element("div.chatContentListNode",{styles:this.css.chatContentListNode}).inject(this.chatContentNode),this.chatEditorNode=new Element("div",{styles:this.css.chatEditorNode}).inject(this.chatContentNode),this.chat=new MWF.xApplication.Execution.Chat(this.chatContentListNode,this.chatEditorNode,this.app,this.actions,this.lp,{workId:this.data.id}),this.chat.load()},getChatData:function(t){t&&t({})},loadForm:function(){if(this.detailTopNode=new Element("div.detailTopNode",{styles:this.css.detailTopNode}).inject(this.detailArea),this.detailTopIconNode=new Element("div.detailTopIconNode",{styles:this.css.detailTopIconNode}).inject(this.detailTopNode),this.detailTopTextNode=new Element("div.detailTopTextNode",{styles:this.css.detailTopTextNode,text:this.lp.workDetailTitle}).inject(this.detailTopNode),this.data.status&&this.data.status==this.workDetailLp.archiveStatus){var t=this.data.archiveDate&&""!=this.data.archiveDate?":"+this.data.archiveDate:"";this.archiveTextDiv=new Element("div.archiveTextDiv",{styles:this.css.archiveTextDiv,text:"("+this.workDetailLp.archiveStatus+t+")"}).inject(this.detailTopNode)}this.detailContentNode=new Element("div.detailContentNode",{styles:this.css.detailContentNode}).inject(this.detailArea);this.detailContentNode.set("html","<table width='100%' border='0' cellpadding='5' cellspacing='0' styles='formTable'><tr>   <td styles='formTableTitle' lable='centerWorkTitle'></td>   <td styles='formTableValue' item='centerWorkTitle' colspan='3'></td></tr><tr>   <td styles='formTableTitle' lable='timeLimit'></td>   <td styles='formTableValue' item='timeLimit'></td>   <td styles='formTableTitle' lable='reportCycle'></td>   <td styles='formTableValue'><span item='reportCycle'></span><span item='reportDay'></span></td></tr><tr>   <td styles='formTableTitle' lable='dutyDepartment'></td>   <td styles='formTableValue' item='dutyDepartment'></td>   <td styles='formTableTitle' lable='dutyPerson'></td>   <td styles='formTableValue' item='dutyPerson'></td></tr><tr>   <td styles='formTableTitle' lable='secondDepartment'></td>   <td styles='formTableValue' item='secondDepartment'></td>   <td styles='formTableTitle' lable='secondPerson'></td>   <td styles='formTableValue' item='secondPerson'></td></tr><tr>   <td styles='formTableTitle' lable='readReader'></td>   <td styles='formTableValue' item='readReader' colspan='3'></td></tr><tr>   <td styles='formTableValue' colspan='4'>       <div styles='formTableTitleDiv' lable='workSplitAndDescription'></div>       <div styles='formTableValueDiv' item='workSplitAndDescription'></div>   </td></tr><tr>   <td styles='formTableValue' colspan='4'>       <div styles='formTableTitleDiv' lable='specificActionInitiatives'></div>       <div styles='formTableValueDiv' item='specificActionInitiatives'></div>   </td></tr><tr>   <td styles='formTableValue' colspan='4'>       <div styles='formTableTitleDiv' lable='milestoneMark'></div>       <div styles='formTableValueDiv' item='milestoneMark'></div>   </td></tr><tr>   <td styles='formTableValue' colspan='4'>       <div styles='formTableValueDiv' item='attachments'></div>   </td></tr></table>"),this.form=new MForm(this.detailContentNode,this.data,{style:"execution",isEdited:this.isEdited||this.isNew,itemTemplate:this.getWorkDetailsItemTemplate(this.lp.workForm),onPostLoad:function(){}.bind(this)},this.app,this.css),this.form.load(),this.attachmentArea=this.detailArea.getElement("[item='attachments']"),this.loadAttachment(this.attachmentArea),this.checkArea=new Element("div.checkArea",{styles:this.css.checkArea}).inject(this.detailContentNode),this.checkTitle=new Element("div.checkTitle",{styles:this.css.checkTitle,text:this.workDetailLp.checkTitle}).inject(this.checkArea),this.checkContent=new Element("div.checkContent",{styles:this.css.checkContent}).inject(this.checkArea);var e=this.workDetailLp.checkEmpty;this.baseWorkData.currentAppraiseStatus&&""!=this.baseWorkData.currentAppraiseStatus&&(e=this.baseWorkData.currentAppraiseStatus==this.workDetailLp.checkCompleted?this.baseWorkData.currentAppraiseStatus:this.workDetailLp.checkFlow),e==this.workDetailLp.checkEmpty?this.checkContent.set("text",e):(this.checkContent.set("text","("+e+")"+this.baseWorkData.currentAppraiseTitle),this.checkContent.setStyles({"text-decoration":"underline",cursor:"pointer"}),this.checkContent.addEvents({click:function(){this.baseWorkData.currentAppraiseStatus==this.workDetailLp.checkCompleted?this.baseWorkData.currentAppraiseJobId&&this.actions.findProcessCompleteId(this.baseWorkData.currentAppraiseJobId,function(t){var e=t.data.workCompletedList;if(e.length>0){var s={workCompletedId:e[0].id,onQueryClose:function(){}.bind(this)};layout.desktop.openApplication(this.event,"process.Work",s)}}.bind(this)):layout.desktop.openApplication(this.event,"process.Work",{workId:this.baseWorkData.currentAppraiseWorkId})}.bind(this)})),this.tmpLp=this.workDetailLp.processInfo,this.processInfo=new Element("div.processInfo",{styles:this.css.processInfoDiv}).inject(this.detailContentNode),this.processInfoTitle=new Element("div.processInfoTitle",{styles:this.css.processInfoTitleDiv,text:this.tmpLp.title}).inject(this.processInfo),this.processInfoContent=new Element("div.processInfoContent",{styles:this.css.processInfoContent}).inject(this.processInfo);var s="<tr>";s+="<td styles='processTH'>"+this.tmpLp.operate+"</td>",s+="<td styles='processTH'>"+this.tmpLp.time+"</td>",s+="<td styles='processTH'>"+this.tmpLp.source.split("@")[0]+"</td>",s+="<td styles='processTH'>"+this.tmpLp.target.split("@")[0]+"</td>",s+="<td styles='processTH'>"+this.tmpLp.opinion+"</td>",s+="</tr>",this.baseWorkData.workDeployAuthorizeRecords&&this.baseWorkData.workDeployAuthorizeRecords.each(function(t){s+="<tr>",s+="<td styles='processTD'>"+t.operationTypeCN+"</td>",s+="<td styles='processTD'>"+t.operationTime+"</td>",s+="<td styles='processTD'>"+t.source.split("@")[0]+"</td>",s+="<td styles='processTD'>"+t.target.split("@")[0]+"</td>",s+="<td styles='processTD'>"+t.opinion+"</td>",s+="</tr>"}.bind(this));this.processInfoContent.set("html","<table styles='processTable'>"+s+"</table>"),this.formatStyles(this.processInfoContent),this.app.setScrollBar(this.detailContentNode)},formatStyles:function(t){t.getElements("[styles]").each(function(t){var e=t.get("styles");e&&this.css[e]&&t.setStyles(this.css[e])}.bind(this))},getWorkDetailsItemTemplate:function(t){return _self=this,{centerWorkTitle:{text:t.centerWorkTitle+":",value:this.data.centerWorkInfo.title},workType:{text:t.workType+":",type:"select",selectValue:t.workTypeValue.split(",")},workLevel:{text:t.workLevel+":",type:"select",notEmpty:!0,selectValue:t.workLevelValue.split(",")},timeLimit:{text:t.timeLimit+":",tType:"date",name:"completeDateLimitStr",notEmpty:!0},reportCycle:{text:t.reportCycle+":",type:"select",selectText:t.reportCycleText.split(","),event:{change:function(e,s){e.get("value")==t.reportCycleText.split(",")[0]?this.form.getItem("reportDay").resetItemOptions(t.weekDayValue.split(","),t.weekDayText.split(",")):e.get("value")==t.reportCycleText.split(",")[1]&&this.form.getItem("reportDay").resetItemOptions(t.monthDayValue.split(","),t.monthDayText.split(","))}.bind(this)}},reportDay:{type:"select",name:"reportDayInCycle",selectValue:this.data.reportCycle&&this.data.reportCycle!=t.reportCycleText.split(",")[0]?t.monthDayValue.split(","):t.weekDayValue.split(","),selectText:this.data.reportCycle&&this.data.reportCycle!=t.reportCycleText.split(",")[0]?t.monthDayText.split(","):t.weekDayText.split(",")},dutyDepartment:{text:t.dutyDepartment+":",name:"responsibilityUnitName",type:"org",orgType:"unit"},dutyPerson:{text:t.dutyPerson+":",name:"responsibilityIdentity",type:"org",orgType:"identity"},secondDepartment:{text:t.secondDepartment+":",name:"cooperateUnitNameList",value:this.data.cooperateUnitNameList?this.data.cooperateUnitNameList.join(","):"",type:"org",orgType:"unit"},secondPerson:{text:t.secondPerson+":",type:"org",orgType:"identity",name:"cooperateIdentityList",value:this.data.cooperateIdentityList?this.data.cooperateIdentityList.join(","):"",count:0},readReader:{text:t.readReader+":",type:"org",orgType:"identity",name:"readLeaderIdentityList",value:this.data.readLeaderIdentityList?this.data.readLeaderIdentityList.join(","):"",count:0},subject:{text:t.subject+":",name:"title",notEmpty:!0},workSplitAndDescription:{text:t.workSplitAndDescription+":",type:"textarea",name:"workDetail",notEmpty:!0},specificActionInitiatives:{text:t.specificActionInitiatives+":",type:"textarea",name:"progressAction"},cityCompanyDuty:{text:t.cityCompanyDuty+":",type:"textarea",name:"dutyDescription"},milestoneMark:{text:t.milestoneMark+":",type:"textarea",name:"landmarkDescription"},importantMatters:{text:t.importantMatters+":",type:"textarea",name:"majorIssuesDescription"}}},loadAttachment:function(t){this.attachment=new MWF.xApplication.Execution.Attachment(t,this.app,this.actions,this.app.lp,{documentId:this.data.id,isNew:this.options.isNew,isEdited:this.options.isEdited,size:"min",isSizeChange:!0}),this.attachment.load()},_ok:function(t,e){},setFormNodeSize:function(t,e,s,i){t||(t=this.options.width?this.options.width:"50%"),e||(e=this.options.height?this.options.height:"50%"),s||(s=this.options.top?this.options.top:0),i||(i=this.options.left?this.options.left:0);var o=this.app.content.getSize(),n=o.x-this.formTopCloseActionNode.getSize().x-this.formTopIconNode.getSize().x-40;this.formTopTextNode.setStyles({width:n+"px"});var r=o.x,a=o.y;"string"==typeof t&&1<t.length&&"%"==t.substr(t.length-1,1)&&(t=parseInt(r*parseInt(t,10)/100,10)),"string"==typeof e&&1<e.length&&"%"==e.substr(e.length-1,1)&&(e=parseInt(a*parseInt(e,10)/100,10)),300>t&&(t=300),220>e&&(e=220),s=s||parseInt((a-e)/2,10),i=i||parseInt((r-t)/2,10),this.formAreaNode.setStyles({width:t+"px",height:e+"px",top:s+"px",left:i+"px"}),this.formNode.setStyles({width:t+"px",height:e+"px"});var p=this.formIconNode?this.formIconNode.getSize():{x:0,y:0},l=this.formTopNode?this.formTopNode.getSize():{x:0,y:0},h=this.formBottomNode?this.formBottomNode.getSize():{x:0,y:0},d=e-p.y-l.y-h.y;this.formContentNode.setStyles({height:d+"px"}),this.formTableContainer.setStyles({height:d+"px"}),this.detailContentNode.setStyles({height:d-this.detailTopNode.getSize().y+"px"}),this.chatContentListNode&&this.chatContentListNode.setStyles({height:d-this.chatTopNode.getSize().y-this.chatEditorNode.getSize().y+"px"});var c=(d-2*this.reportTopNode.getSize().y)/2;this.reportContentNode.setStyles({height:c+"px"}),this.reportContentInforHeight=d-this.reportTopNode.getSize().y,this.prevReportInforListDiv&&this.prevReportInforListDiv.setStyles({height:this.reportContentInforHeight+"px"}),this.questionContentNode.setStyles({height:c+"px"})},setContentSize:function(){var t=this.app.content.getSize(),e=this.leftArea.getStyle("width"),s=this.chatArea.getStyle("width"),i=t.x-parseInt(e)-parseInt(s);this.detailArea.setStyles({width:i+"px"})},showErrorMessage:function(t,e,s){var i=s;if(t&&(errorMessage=t.responseText),""!=errorMessage){var o=JSON.parse(errorMessage);o.message?this.app.notice(o.message,"error"):this.app.notice(i,"error")}else this.app.notice(i,"error")}});