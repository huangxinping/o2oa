MWF.xApplication.Execution=MWF.xApplication.Execution||{},MWF.xDesktop.requireApp("Template","Explorer",null,!1),MWF.xDesktop.requireApp("Template","MPopupForm",null,!1),MWF.xDesktop.requireApp("Template","MForm",null,!1),MWF.xDesktop.requireApp("Execution","WorkForm",null,!1),MWF.xApplication.Execution.CoreWork=new Class({Extends:MPopupForm,Implements:[Options,Events],options:{style:"default",width:"100%",height:"100%",hasTop:!0,hasIcon:!1,hasBottom:!0,title:"",draggable:!1,closeAction:!0,isNew:!1,isEdited:!0},initialize:function(e,t,o,i){this.setOptions(i),this.explorer=e,this.app=e.app,this.lp=this.app.lp.coreWork,this.actions=this.app.restActions,this.path="../x_component_Execution/$CoreWork/",this.cssPath=this.path+this.options.style+"/css.wcss",this._loadCss(),this.options.title=this.lp.title,this.data=o||{},this.actions=t},load:function(){this.options.isNew?this.create():this.options.isEdited?this.edit():this.open()},createTopNode:function(){this.formTopNode||(this.formTopNode=new Element("div.formTopNode",{styles:this.css.formTopNode}).inject(this.formNode),this.formTopIconNode=new Element("div",{styles:this.css.formTopIconNode}).inject(this.formTopNode),this.formTopTextNode=new Element("div",{styles:this.css.formTopTextNode,text:this.options.title}).inject(this.formTopNode),this.options.closeAction&&(this.formTopCloseActionNode=new Element("div.formTopCloseActionNode",{styles:this.css.formTopCloseActionNode}).inject(this.formTopNode),this.formTopCloseActionNode.addEvent("click",function(){this.close()}.bind(this))),this.formTopContentNode=new Element("div",{styles:this.css.formTopContentNode}).inject(this.formTopNode),this._createTopContent())},_createTopContent:function(){this.formTopContentNode.set("html","<span styles='formTopContentTitle' lable='drafter'></span>    <span styles='formTopContentValue' item='drafter'></span><span styles='formTopContentTitle' lable='draftDepartment'></span>    <span styles='formTopContentValue' item='draftDepartment'></span><span styles='formTopContentTitle' lable='draftDate'></span>    <span styles='formTopContentValue' item='draftDate'></span>"),new MForm(this.formTopContentNode,{drafter:"xadmin",draftDepartment:"开发部",draftDate:"2016-02-02"},{isEdited:this.isEdited||this.isNew,itemTemplate:{drafter:{text:this.lp.drafter+":",type:"innertext"},draftDepartment:{text:this.lp.draftDepartment+":",type:"innertext"},draftDate:{text:this.lp.draftDate+":",type:"innertext"}}},this.app,this.css).load()},_createTableContent:function(){this.createCoreWorkInfor(),this.createMyWorkList(),this.createSplitWorkList()},createCoreWorkInfor:function(){var e=new Element("div.workContentArea",{styles:this.css.workContentArea}).inject(this.formTableArea),t=(new Element("div",{styles:this.css.workContentTitleNode,text:this.lp.coreWorkInfor}).inject(e),new Element("div",{styles:this.css.workContentNode}).inject(e));t.set("html","<table width='100%' bordr='0' cellpadding='5' cellspacing='0' styles='coreWorkInforTable'><tr><td styles='coreWorkInforTitle' lable='coreWorkTitle'></td>    <td styles='coreWorkInforValue' item='coreWorkTitle'></td></tr><tr><td><span styles='coreWorkInforTitleDiv' lable='defaultWorkType'></span>    <span styles='coreWorkInforValueDiv' item='defaultWorkType'></span>   <span styles='coreWorkInforTitleDiv' lable='defaultWorkLevel'></span>    <span styles='coreWorkInforValueDiv' item='defaultWorkLevel'></span>   <span styles='coreWorkInforTitleDiv' lable='workCompletedLimit'></span>    <span styles='coreWorkInforValueDiv' item='workCompletedLimit'></span></td></tr><tr><td styles='coreWorkInforTitle' lable='coreWorkMemo'></td>    <td styles='coreWorkInforValue' item='coreWorkMemo'></td></tr></table>"),new MForm(t,{data:"data"},{isEdited:this.isEdited||this.isNew,itemTemplate:{coreWorkTitle:{text:this.lp.coreWorkTitle+":",type:"innertext"},defaultWorkType:{text:this.lp.defaultWorkType+":",type:"innertext"},defaultWorkLevel:{text:this.lp.defaultWorkLevel+":",type:"innertext"},workCompletedLimit:{text:this.lp.workCompletedLimit+":",type:"innertext"},coreWorkMemo:{text:this.lp.coreWorkMemo+":",type:"innertext"}}},this.app).load()},createMyWorkList:function(){var e=new Element("div.workContentArea",{styles:this.css.workContentArea}).inject(this.formTableArea),t=(new Element("div",{styles:this.css.workContentTitleNode,text:this.lp.myWorkInfor}).inject(e),new Element("div",{styles:this.css.workContentNode}).inject(e));new MWF.xApplication.Execution.CoreWork.MyWorkView(t,this.app,this,{templateUrl:this.path+"listItem.json"}).load()},createSplitWorkList:function(){var e=new Element("div.workContentArea",{styles:this.css.workContentArea}).inject(this.formTableArea),t=(new Element("div",{styles:this.css.workContentTitleNode,text:this.lp.splitWorkInfor}).inject(e),new Element("div",{styles:this.css.workContentNode}).inject(e));new MWF.xApplication.Execution.CoreWork.MyWorkView(t,this.app,this,{templateUrl:this.path+"listItem.json"}).load()}}),MWF.xApplication.Execution.CoreWork.MyWorkView=new Class({Extends:MWF.xApplication.Template.Explorer.ComplexView,_createDocument:function(e){return new MWF.xApplication.Execution.CoreWork.MyWorkDocument(this.viewNode,e,this.explorer,this)},_getCurrentPageData:function(e,t){e&&e({type:"success",data:[{id:"53a508ec-7862-4036-a273-c15830cd3f86",createTime:"2016-04-19 15:38:50",updateTime:"2016-04-19 15:38:50",sequence:"2016041915385053a508ec-7862-4036-a273-c15830cd3f46",subject:"2016年人力资源部弹性福利系统优化和福利套餐方案制定工作",defaultWorkLevel:"公司重点工作",defaultWorkType:"深化改革",dutyDepartent:"人力资源部",doDepartment:"公司领导",secondDepartment:"综合部，信息化事业部",dutyPerson:"蒋艺娟",doPerson:"蔡全根",secondPerson:"宋兰美，周琼",timeLimit:"2016-08-18"},{id:"53a508ec-7862-4036-a273-c15830cd3f88",createTime:"2016-04-19 15:38:50",updateTime:"2016-04-19 15:38:50",sequence:"2016041915385053a508ec-7862-4036-a273-c15830cd3f46",subject:"2016年人力资源部弹性福利系统优化和福利套餐方案制定工作",defaultWorkLevel:"公司重点工作",defaultWorkType:"深化改革",dutyDepartent:"人力资源部",doDepartment:"公司领导",secondDepartment:"综合部，信息化事业部",dutyPerson:"蒋艺娟",doPerson:"蔡全根",secondPerson:"宋兰美，周琼",timeLimit:"2016-08-18"}],date:"2016-05-27 14:20:07",spent:2,size:2,count:0,position:0,message:""})},_removeDocument:function(e,t){this.actions.deleteSchedule(e.id,function(e){this.reload(),this.app.notice(this.app.lp.deleteDocumentOK,"success")}.bind(this))},_create:function(){},_openDocument:function(e){this.workForm=new MWF.xApplication.Execution.WorkForm(this,this.actions,e,{isNew:!1,isEdited:!1}),this.workForm.load()},_queryCreateViewNode:function(){},_postCreateViewNode:function(e){},_queryCreateViewHead:function(){},_postCreateViewHead:function(e){}}),MWF.xApplication.Execution.CoreWork.MyWorkDocument=new Class({Extends:MWF.xApplication.Template.Explorer.ComplexDocument,action_comfirm:function(){},action_split:function(){this.workForm=new MWF.xApplication.Execution.WorkForm(this,this.actions,this.data,{isNew:!0,isEdited:!1}),this.workForm.load()},_queryCreateDocumentNode:function(e){},_postCreateDocumentNode:function(e,t){}});