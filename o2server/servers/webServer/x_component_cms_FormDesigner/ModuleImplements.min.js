MWF.xDesktop.requireApp("process.FormDesigner","Property",null,!1),MWF.CMSProperty_Process||(MWF.CMSProperty_Process={getViewList:MWF.xApplication.process.FormDesigner.Property.prototype.getViewList.$origin,loadScriptEditor:MWF.xApplication.process.FormDesigner.Property.prototype.loadScriptEditor.$origin,loadActionArea:MWF.xApplication.process.FormDesigner.Property.prototype.loadActionArea.$origin,loadEventsEditor:MWF.xApplication.process.FormDesigner.Property.prototype.loadEventsEditor.$origin,loadValidation:MWF.xApplication.process.FormDesigner.Property.prototype.loadValidation.$origin,loadFormFieldInput:MWF.xApplication.process.FormDesigner.Property.prototype.loadFormFieldInput.$origin,loadPersonInput:MWF.xApplication.process.FormDesigner.Property.prototype.loadPersonInput.$origin,loadProcessApplictionSelect:MWF.xApplication.process.FormDesigner.Property.prototype.loadProcessApplictionSelect.$origin},MWF.xApplication.process.FormDesigner.Property.implement({loadProcessApplictionSelect:function(e,t,o){this.designer.options.name.toLowerCase().contains("cms")?this.loadProcessApplictionSelect_CMS(e,t,o):this.loadProcessApplictionSelect_Process(e,t,o)},loadProcessApplictionSelect_Process:MWF.CMSProperty_Process.loadProcessApplictionSelect,loadProcessApplictionSelect_CMS:function(e,t,o){var i=t?this.data[t]:"";MWF.xDesktop.requireApp("process.ProcessDesigner","widget.PersonSelector",function(){new MWF.xApplication.process.ProcessDesigner.widget.PersonSelector(e,this.form.designer,{title:this.form.designer.lp.selectApplication,type:"CMSApplication",count:1,names:i?[{id:i}]:[],onChange:function(e){o(e)}.bind(this)})}.bind(this))},loadFormFieldInput:function(){this.designer.options.name.toLowerCase().contains("cms")?this.loadFormFieldInput_CMS():this.loadFormFieldInput_Process()},loadFormFieldInput_Process:MWF.CMSProperty_Process.loadFormFieldInput,loadFormFieldInput_CMS:function(){var e=this.propertyContent.getElements(".MWFFormFieldPerson");MWF.xDesktop.requireApp("cms.QueryViewDesigner","widget.PersonSelector",function(){e.each(function(e){new MWF.xApplication.cms.QueryViewDesigner.widget.PersonSelector(e,this.form.designer,{type:"formField",form:this.form.json.id,fieldType:"person",names:this.data[e.get("name")],onChange:function(t){this.savePersonItem(e,t)}.bind(this)})}.bind(this))}.bind(this))},loadScriptEditor:function(e,t){this.designer.options.name.toLowerCase().contains("cms")?this.loadScriptEditor_CMS(e,t):this.loadScriptEditor_Process(e,t)},loadScriptEditor_Process:MWF.CMSProperty_Process.loadScriptEditor,loadScriptEditor_CMS:function(e,t){e.each(function(e){var o=e.get("title"),i=e.get("name"),n=this.data[i];MWF.require("MWF.widget.ScriptArea",function(){var r=new MWF.widget.ScriptArea(e,{title:o,maxObj:this.designer.formContentNode,onChange:function(){this.data[i]=r.toJson()}.bind(this),onSave:function(){this.designer.saveForm()}.bind(this),style:t||"default",helpStyle:"cms"});r.load(n)}.bind(this))}.bind(this))},loadActionArea:function(){this.designer.options.name.toLowerCase().contains("cms")?this.loadActionArea_CMS():this.loadActionArea_Process()},loadActionArea_Process:MWF.CMSProperty_Process.loadActionArea,loadActionArea_CMS:function(){this.propertyContent.getElements(".MWFMultiActionArea").each(function(e){var t=e.get("name"),o=this.data[t];MWF.xDesktop.requireApp("cms.FormDesigner","widget.ActionsEditor",function(){var i=new MWF.xApplication.cms.FormDesigner.widget.ActionsEditor(e,this.designer,this.data,{maxObj:this.propertyNode.parentElement.parentElement.parentElement,isSystemTool:!0,onChange:function(){this.data[t]=i.data,this.changeData(t)}.bind(this)});i.load(o)}.bind(this))}.bind(this)),this.propertyContent.getElements(".MWFActionArea").each(function(e){var t=e.get("name"),o=this.data[t];MWF.xDesktop.requireApp("cms.FormDesigner","widget.ActionsEditor",function(){var i=new MWF.xApplication.cms.FormDesigner.widget.ActionsEditor(e,this.designer,this.data,{maxObj:this.propertyNode.parentElement.parentElement.parentElement,onChange:function(){this.data[t]=i.data,this.changeData(t)}.bind(this)});i.load(o)}.bind(this))}.bind(this)),this.propertyContent.getElements(".MWFDefaultActionArea").each(function(e){var t=e.get("name"),o=this.data[t]||this.module.defaultToolBarsData;MWF.xDesktop.requireApp("cms.FormDesigner","widget.ActionsEditor",function(){var i=new MWF.xApplication.cms.FormDesigner.widget.ActionsEditor(e,this.designer,this.data,{maxObj:this.propertyNode.parentElement.parentElement.parentElement,isSystemTool:!0,noCreate:!0,noDelete:!1,noCode:!0,noReadShow:!0,noEditShow:!0,onChange:function(){this.data[t]=i.data,this.changeData(t)}.bind(this)});i.load(o)}.bind(this))}.bind(this))},loadEventsEditor:function(){this.designer.options.name.toLowerCase().contains("cms")?this.loadEventsEditor_CMS():this.loadEventsEditor_Process()},loadEventsEditor_Process:MWF.CMSProperty_Process.loadEventsEditor,loadEventsEditor_CMS:function(){var e=this.propertyContent.getElement(".MWFEventsArea");if(e){var t=e.get("name"),o=this.data[t];MWF.xDesktop.requireApp("cms.FormDesigner","widget.EventsEditor",function(){new MWF.xApplication.cms.FormDesigner.widget.EventsEditor(e,this.designer,{maxObj:this.designer.formContentNode}).load(o)}.bind(this))}},loadValidation:function(){this.designer.options.name.toLowerCase().contains("cms")?this.loadValidation_CMS():this.loadValidation_Process()},loadValidation_Process:MWF.CMSProperty_Process.loadValidation,loadValidation_CMS:function(){MWF.xDesktop.requireApp("cms.FormDesigner","widget.ValidationEditor",null,!1);var e=this.propertyContent.getElements(".MWFValidation");e.length&&e.each(function(e){var t=e.get("name"),o=new MWF.xApplication.cms.FormDesigner.widget.ValidationEditor(e,this.designer,{onChange:function(){var e=o.getValidationData();this.data[t]=e}.bind(this)});o.load(this.data[t])}.bind(this))}})),MWF.xApplication.cms.FormDesigner.ModuleImplements=MWF.CMSFCMI=new Class({});