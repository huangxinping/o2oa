layout.addReady((function(){!function(o){var n=new URI(window.location.href),t=n.get("data");if(t["x-token"]){Cookie.dispose("x-token");var i=window.location.host,s=null;/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/.test(i)?s=i:i.indexOf(".")>0&&(s=i.substring(i.indexOf("."))),s?Cookie.write("x-token",t["x-token"],{domain:s,path:"/"}):Cookie.write("x-token",t["x-token"])}var e=function(){this.options=n.get("data"),this.options.documentId||(this.options.documentId=this.options.id),this.options.name="cms.Document",o.openApplication(null,"cms.Document",this.options,null)};o.session&&o.session.user?e():o.sessionPromise&&o.sessionPromise.then((function(){e()}),(function(){}))}(layout)}));