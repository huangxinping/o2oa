MWF.xDesktop.requireApp("process.ViewDesigner","Property",null,!1),MWF.xApplication.cms.QueryViewDesigner.Property=MWF.CMSQVDProperty=new Class({Extends:MWF.xApplication.process.ViewDesigner.Property,options:{style:"default",path:"../x_component_cms_FormDesigner/property/property.html"},loadColumnExportEditor:function(){var e=this;this.propertyContent.getElements(".MWFColumnExport").each(function(t){var n=t.getElement("select"),i=this.view.data.data.orderEntryList;i.each(function(e){e.column==this.data.column&&("asc"==e.orderType&&n.options[1].set("selected",!0),"desc"==e.orderType&&n.options[1].set("selected",!1))}.bind(this)),n.addEvent("change",function(e){if("none"!=n.options[n.selectedIndex].value){var t=!1;i.each(function(e){e.column==this.data.column&&(t=!0,e.orderType=n.options[n.selectedIndex].value)}.bind(this)),t||i.push({column:this.data.column,orderType:n.options[n.selectedIndex].value})}else{var s=null;i.each(function(e){e.column==this.data.column&&(s=e)}.bind(this)),s&&i.erase(s)}}.bind(this));var s=t.getElements("input"),r=this.view.data.data.groupEntry;r.column==this.data.column&&s[0].set("checked",!0),s.addEvent("click",(function(t){this.checked&&("true"==this.value?(e.view.data.data.group.column=e.data.column,e.view.items.each((function(e){e.property&&e.property.propertyContent.getElement(".MWFColumnExportGroup").getElements("input").each((function(e){"true"==e.value&&e.set("checked",!1),"false"==e.value&&e.set("checked",!0)}))})),this.set("checked",!0)):r.column==e.data.column&&(e.view.data.data.group={}))}))}.bind(this))},loadPersonSelectInput:function(){var e=this.propertyContent.getElements(".MWFSelectApplication"),t=this.propertyContent.getElements(".MWFSelectCategory"),n=this.propertyContent.getElements(".MWFSelectUnit"),i=this.propertyContent.getElements(".MWFSelectPerson"),s=this.propertyContent.getElements(".MWFSelectIdentity");MWF.xDesktop.requireApp("cms.QueryViewDesigner","widget.PersonSelector",function(){e.each(function(e){new MWF.xApplication.cms.QueryViewDesigner.widget.PersonSelector(e,this.view.designer,{type:"application",names:this.data.data.restrictWhereEntry?this.data.data.restrictWhereEntry.appInfoList:[],onChange:function(t){this.savePersonSelectItem(e,t)}.bind(this)})}.bind(this)),t.each(function(e){new MWF.xApplication.cms.QueryViewDesigner.widget.PersonSelector(e,this.view.designer,{type:"category",names:this.data.data.restrictWhereEntry?this.data.data.restrictWhereEntry.categoryList:[],onChange:function(t){this.savePersonSelectItem(e,t)}.bind(this)})}.bind(this)),n.each(function(e){new MWF.xApplication.cms.QueryViewDesigner.widget.PersonSelector(e,this.view.designer,{type:"unit",names:this.data.data.restrictWhereEntry?this.data.data.restrictWhereEntry.unitList:[],onChange:function(t){this.savePersonSelectItem(e,t)}.bind(this)})}.bind(this)),i.each(function(e){new MWF.xApplication.cms.QueryViewDesigner.widget.PersonSelector(e,this.view.designer,{type:"person",names:this.data.data.restrictWhereEntry?this.data.data.restrictWhereEntry.personList:[],onChange:function(t){this.savePersonSelectItem(e,t)}.bind(this)})}.bind(this)),s.each(function(e){new MWF.xApplication.cms.QueryViewDesigner.widget.PersonSelector(e,this.view.designer,{type:"identity",names:this.data.data.restrictWhereEntry?this.data.data.restrictWhereEntry.identityList:[],onChange:function(t){this.savePersonSelectItem(e,t)}.bind(this)})}.bind(this))}.bind(this))}});